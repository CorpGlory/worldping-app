{"version":3,"sources":["../../../src/components/endpoint/endpoint_config.js"],"names":[],"mappings":"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","file":"endpoint_config.js","sourcesContent":["import _ from 'lodash';\nimport angular from 'angular';\n\nvar defaultRoute = {\n  type: \"byIds\",\n  config: {\n    ids: []\n  }\n};\nvar defaultHealthSettings = {\n  num_collectors: 3,\n  steps: 3\n};\n\nvar defaultCheck = {\n  settings: {},\n  healthSettings: {\n    notifications: {}\n  },\n  route: {\n    type: \"byIds\",\n    config: {\n      \"ids\": []\n    }\n  }\n};\n\nclass EndpointConfigCtrl {\n   /** @ngInject */\n  constructor($scope, $injector, $rootScope, $location, $modal, $anchorScroll, $timeout, $window, $q, backendSrv, alertSrv) {\n    var self = this;\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.$timeout = $timeout;\n    this.$q = $q;\n    this.alertSrv = alertSrv;\n    this.$window = $window;\n\n    this.pageReady = false;\n    this.showCreating = false;\n    self.insufficientQuota = false;\n\n    this.frequencyOpts = [];\n    var freqOpt = [10, 30, 60, 120];\n    _.forEach(freqOpt, function(f) {\n      self.frequencyOpts.push({value: f, label: \"Every \"+f+\"s\"});\n    });\n\n    this.newEndpointName = \"\";\n    this.checks = {};\n    this.endpoint = {};\n    this.probes = [];\n    this.probesByTag = {};\n\n    this.ignoreChanges = false;\n\n    var promises = [];\n    self.reset();\n    if (\"endpoint\" in $location.search()) {\n      promises.push(self.getEndpoint($location.search().endpoint));\n    } else {\n      // make sure we have sufficient quota.\n      promises.push(self.checkQuota());\n      this.endpoint = {name: \"\"};\n    }\n\n    promises.push(this.getProbes());\n    $q.all(promises).then(function() {\n      self.pageReady = true;\n      $timeout(function() {\n        $anchorScroll();\n      }, 0, false);\n    }, function(err) {\n      alertSrv.set(\"endpoint config init failed\", err, 'error', 10000);\n    });\n\n    if ($location.search().check) {\n      switch($location.search().check) {\n      case \"ping\":\n        self.showPing = true;\n        break;\n      case \"dns\":\n        self.showDNS = true;\n        break;\n      case \"http\":\n        self.showHTTP = true;\n        break;\n      case \"https\":\n        self.showHTTPS = true;\n        break;\n      }\n    }\n\n    $window.onbeforeunload = function() {\n      if (self.ignoreChanges) { return; }\n      if (self.changesPending()) {\n        return \"There are unsaved changes to this dashboard\";\n      }\n    };\n\n    $scope.$on('$locationChangeStart', function(event, next) {\n      if ((!self.ignoreChanges) && (self.changesPending())) {\n        event.preventDefault();\n        var baseLen = $location.absUrl().length - $location.url().length;\n        var nextUrl = next.substring(baseLen);\n        var modalScope = $scope.$new();\n        modalScope.ignore = function() {\n          self.ignoreChanges = true;\n          $location.url(nextUrl);\n          return;\n        };\n\n        modalScope.save = function() {\n          self.save(nextUrl);\n        };\n\n        $rootScope.appEvent('show-modal', {\n          src: 'public/app/partials/unsaved-changes.html',\n          modalClass: 'confirm-modal',\n          scope: modalScope,\n        });\n      }\n    });\n  }\n\n  getEndpoint(idString) {\n    var self = this;\n    var id = parseInt(idString);\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/endpoints/'+id).then((resp) => {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to get endpoint.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.endpoint = resp.body;\n      self.newEndpointName = self.endpoint.name;\n      _.forEach(resp.body.checks, function(check) {\n        self.checks[check.type] = _.cloneDeep(check);\n      });\n      var definedChecks = _.keys(self.checks);\n      if (definedChecks.length < 4) {\n        if (_.indexOf(definedChecks, \"http\") === -1) {\n          self.checks[\"http\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"http\"].type = \"http\";\n        }\n        if (_.indexOf(definedChecks, \"https\") === -1) {\n          self.checks[\"https\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"https\"].type = \"https\";\n        }\n        if (_.indexOf(definedChecks, \"ping\") === -1) {\n          self.checks[\"ping\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"ping\"].type = \"ping\";\n        }\n        if (_.indexOf(definedChecks, \"dns\") === -1) {\n          self.checks[\"dns\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"dns\"].type = \"dns\";\n        }\n      }\n    });\n  }\n\n  checkQuota() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/quotas').then((resp) => {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to get quotas.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      _.forEach(resp.body, function(q) {\n        if (q.target === \"endpoint\") {\n          if (q.limit > 0 && q.used >= q.limit) {\n            self.insufficientQuota = true;\n          }\n        }\n      });\n      if (self.insufficientQuota) {\n        return self.$q.reject(\"Endpoint quota reached.\");\n      }\n      return true;\n    });\n  }\n\n  getProbes() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/probes').then(function(resp) {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to get getProbes.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.probes = resp.body;\n      _.forEach(self.probes, function(probe) {\n        defaultRoute.config.ids.push(probe.id);\n        _.forEach(probe.tags, function(t) {\n          if (!(t in self.probesByTag)) {\n            self.probesByTag[t] = [];\n          }\n          self.probesByTag[t].push(probe);\n        });\n      });\n    });\n  }\n\n  probeCount(check) {\n    if (!check) {\n      return 0;\n    }\n    return this.getProbesForCheck(check).length;\n  }\n\n  getProbesForCheck(check) {\n    if (check.route.type === \"byIds\") {\n      return check.route.config.ids;\n    } else if (check.route.type === \"byTags\") {\n      var probeList = {};\n      _.forEach(this.probes, function(p) {\n        _.forEach(check.route.config.tags, function(t) {\n          if (_.indexOf(p.tags, t) !== -1) {\n            probeList[p.id] = true;\n          }\n        });\n      });\n      return _.keys(probeList);\n    } else {\n      this.alertSrv(\"check has unknown routing type.\", \"unknown route type.\", \"error\", 5000);\n      return [];\n    }\n  }\n\n  totalChecks(check) {\n    if (check === undefined) {\n      return 0;\n    }\n    return (30.5 * 24 * (3600/check.frequency) * this.probeCount(check) / 1000000) + 0.5;\n  }\n\n  reset() {\n    var self = this;\n    this.discovered = false;\n    this.discoveryInProgress = false;\n    this.discoveryError = false;\n    this.showConfig = false;\n    this.showCreating = false;\n    this.endpoint = {};\n    self.checks = {};\n  }\n\n  cancel() {\n    this.reset();\n    this.ignoreChanges = true;\n    this.$window.history.back();\n  }\n\n  remove(endpoint) {\n    var self = this;\n    return this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/v2/endpoints/' + endpoint.id).then((resp) => {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to delete endpoint.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.$location.path('plugins/raintank-worldping-app/page/endpoints');\n    });\n  }\n\n  updateEndpoint() {\n    this.endpoint.name = this.newEndpointName;\n    this.saveEndpoint();\n  }\n\n  tagsUpdated() {\n    this.saveEndpoint();\n  }\n\n  saveEndpoint() {\n    var self = this;\n    return this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/v2/endpoints', this.endpoint).then((resp) => {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to update endpoint.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.endpoint = resp.body;\n    });\n  }\n\n  updateCheck(check) {\n    var self = this;\n\n    if (check.id) {\n      for (var i=0; i < this.endpoint.checks.length; i++) {\n        if (this.endpoint.checks[i].id === check.id) {\n          this.endpoint.checks[i] = _.cloneDeep(check);\n        }\n      }\n    } else {\n      this.endpoint.checks.push(check);\n    }\n    if (check.enabled) {\n      var numProbes = self.probeCount(check);\n      if (numProbes < check.healthSettings.num_collector) {\n        check.healthSettings.num_collectors = numProbes;\n      }\n    }\n    return this.saveEndpoint().then(() => {\n      self.alertSrv.set(check.type + \" check updated.\", \"\", \"success\", 2000);\n      _.forEach(self.endpoint.checks, function(c) {\n        if (c.type === check.type) {\n          self.checks[check.type] = _.cloneDeep(c);\n        }\n      });\n    });\n  }\n\n  skipDiscovery() {\n    this.discoveryInProgress = false;\n    this.showConfig = true;\n    this.discoveryError = false;\n  }\n\n  discover(endpoint) {\n    if (!endpoint.name){\n      return;\n    }\n    var self = this;\n    this.discoveryInProgress = true;\n    this.discoveryError = false;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/endpoints/discover', endpoint).then(function(resp) {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to update endpoint.\", resp.meta.message, 'error', 10000);\n        this.discoveryError = \"Failed to discover endpoint.\";\n        return self.$q.reject(resp.meta.message);\n      }\n      self.endpoint = resp.body;\n      _.forEach(self.endpoint.checks, function(check) {\n        check.route = _.cloneDeep(defaultRoute);\n        check.healthSettings = _.cloneDeep(defaultHealthSettings);\n        self.checks[check.type] = _.cloneDeep(check);\n      });\n      var definedChecks = _.keys(self.checks);\n      if (definedChecks.length < 4) {\n        if (_.indexOf(definedChecks, \"http\") === -1) {\n          self.checks[\"http\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"http\"].type = \"http\";\n        }\n        if (_.indexOf(definedChecks, \"https\") === -1) {\n          self.checks[\"https\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"https\"].type = \"https\";\n        }\n        if (_.indexOf(definedChecks, \"ping\") === -1) {\n          self.checks[\"ping\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"ping\"].type = \"ping\";\n        }\n        if (_.indexOf(definedChecks, \"dns\") === -1) {\n          self.checks[\"dns\"] = _.cloneDeep(defaultCheck);\n          self.checks[\"dns\"].type = \"dns\";\n        }\n      }\n      self.showConfig = true;\n      self.discovered = true;\n    }, function() {\n      self.discoveryError = \"Failed to discover endpoint.\";\n    }).finally(function() {\n      self.discoveryInProgress = false;\n    });\n  }\n\n  addEndpoint() {\n    var self = this;\n    var delay = 120;\n    var newChecks = [];\n    _.forEach(this.checks, function(check) {\n      if (check.enabled) {\n        if (check.frequency < delay) {\n          delay = check.frequency;\n        }\n        var numProbes = self.probeCount(check);\n        if (numProbes < 3) {\n          check.healthSettings.num_collectors = numProbes;\n        }\n        newChecks.push(check);\n      }\n    });\n    this.endpoint.checks = newChecks;\n    return this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/v2/endpoints', this.endpoint)\n    .then(function(resp) {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to add endpoint.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.ignoreChanges = true;\n      self.alertSrv.set(\"endpoint added\", '', 'success', 3000);\n      self.showCreating = true;\n      self.endpointReadyDelay = delay;\n      self.endpointReady = false;\n      self.$timeout(function() {\n        self.$location.url('plugins/raintank-worldping-app/page/endpoint-details?endpoint='+resp.body.id);\n      }, delay * 1000);\n    });\n  }\n\n  changesPending() {\n    var self = this;\n    var changes = false;\n    var seenCheckTypes = {};\n\n    //check if any existing checks have changed\n    _.forEach(this.endpoint.checks, function(check) {\n      seenCheckTypes[check.type] = true;\n      if (!angular.equals(check, self.checks[check.type])) {\n        changes = true;\n      }\n    });\n\n    //check if any new checks added.\n    _.forEach(_.keys(self.checks), function(type) {\n      if (!(type in seenCheckTypes) && (\"frequency\" in self.checks[type])) {\n        changes = true;\n      }\n    });\n\n    return changes;\n  }\n\n  gotoDashboard(endpoint, type) {\n    var self = this;\n    if (!type) {\n      type = 'summary';\n    }\n    var search = {\n      \"var-collector\": \"All\",\n      \"var-endpoint\": this.endpoint.slug\n    };\n    switch(type) {\n      case \"summary\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n      case \"ping\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-ping\").search(search);\n        break;\n      case \"dns\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-dns\").search(search);\n        break;\n      case \"http\":\n        search['var-protocol'] = \"http\";\n        self.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      case \"https\":\n        search['var-protocol'] = \"https\";\n        self.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      default:\n        self.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n    }\n  }\n}\n\nEndpointConfigCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/endpoint/partials/endpoint_config.html';\n\nexport {EndpointConfigCtrl};\n"]}