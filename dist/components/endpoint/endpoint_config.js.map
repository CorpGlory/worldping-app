{"version":3,"sources":["../../../src/components/endpoint/endpoint_config.js"],"names":[],"mappings":"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","file":"endpoint_config.js","sourcesContent":["import _ from 'lodash';\nimport angular from 'angular';\n\nclass EndpointConfigCtrl {\n   /** @ngInject */\n  constructor($scope, $injector, $rootScope, $location, $modal, $anchorScroll, $timeout, $window, backendSrv, alertSrv) {\n    var self = this;\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.$timeout = $timeout;\n    this.alertSrv = alertSrv;\n    this.pageReady = false;\n    this.showCreating = false;\n    this.monitorLastState = {};\n    this.$window = $window;\n    self.insufficientQuota = false;\n\n    this.frequencyOpts = [];\n    var freqOpt = [10, 30, 60, 120];\n    _.forEach(freqOpt, function(f) {\n      self.frequencyOpts.push({value: f, label: \"Every \"+f+\"s\"});\n    });\n\n    this.timeoutRegex = /^([1-9](\\.\\d)?|10)$/;\n    this.editor = {index: 0};\n    this.newEndpointName = \"\";\n    this.endpoint = {};\n    this.monitors = {};\n    this.monitor_types = {};\n    this.monitor_types_by_name = {};\n    this.allCollectors = [];\n    this.collectorsOption = {selection: \"all\"};\n    this.collectorsByTag = {};\n    this.global_collectors = {collector_ids: [], collector_tags: []};\n    this.ignoreChanges = false;\n    this.originalState = {};\n\n    var promises = [];\n    var typesPromise = this.getMonitorTypes();\n    promises.push(typesPromise);\n    if (\"endpoint\" in $location.search()) {\n      promises.push(typesPromise.then(function() {\n        return self.getEndpoint($location.search().endpoint);\n      }));\n    } else {\n      // make sure we have sufficient quota.\n      promises.push(self.checkQuota());\n      this.endpoint = {name: \"\"};\n    }\n\n    this.checks = {};\n\n    promises.push(this.getCollectors());\n    Promise.all(promises).then(function() {\n      self.pageReady = true;\n      self.reset();\n      $timeout(function() {\n        $anchorScroll();\n      }, 0, false);\n      $scope.$apply();\n    }, function(err) {\n      console.log(\"endpoint config init failed.\", err);\n    });\n\n    if ($location.search().check) {\n      switch($location.search().check) {\n      case \"ping\":\n        self.showPing = true;\n        break;\n      case \"dns\":\n        self.showDNS = true;\n        break;\n      case \"http\":\n        self.showHTTP = true;\n        break;\n      case \"https\":\n        self.showHTTPS = true;\n        break;\n      }\n    }\n\n    $window.onbeforeunload = function() {\n      if (self.ignoreChanges) { return; }\n      if (self.changesPending()) {\n        return \"There are unsaved changes to this dashboard\";\n      }\n    };\n\n    $scope.$on('$locationChangeStart', function(event, next) {\n      if ((!self.ignoreChanges) && (self.changesPending())) {\n        event.preventDefault();\n        var baseLen = $location.absUrl().length - $location.url().length;\n        var nextUrl = next.substring(baseLen);\n        var modalScope = $scope.$new();\n        modalScope.ignore = function() {\n          self.ignoreChanges = true;\n          $location.url(nextUrl);\n          return;\n        };\n\n        modalScope.save = function() {\n          self.save(nextUrl);\n        };\n\n        $rootScope.appEvent('show-modal', {\n          src: 'public/app/partials/unsaved-changes.html',\n          modalClass: 'confirm-modal',\n          scope: modalScope,\n        });\n      }\n    });\n  }\n\n  checkQuota() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/org/quotas').then((quotas) => {\n      _.forEach(quotas, function(q) {\n        if (q.target === \"endpoint\") {\n          if (q.used >= q.limit) {\n            self.insufficientQuota = true;\n          }\n        }\n      });\n      if (self.insufficientQuota) {\n        console.log(\"quota reached\");\n        return Promise.reject(\"Quota reached.\");\n      }\n      return true;\n    });\n  }\n\n  getCollectors() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors').then(function(collectors) {\n      self.collectors = collectors;\n      _.forEach(collectors, function(c) {\n        self.allCollectors.push(c.id);\n        _.forEach(c.tags, function(t) {\n          if (!(t in self.collectorsByTag)) {\n            self.collectorsByTag[t] = [];\n          }\n          self.collectorsByTag[t].push(c);\n        });\n      });\n      self.global_collectors = {collector_ids: self.allCollectors, collector_tags: []};\n    });\n  }\n\n  collectorCount(monitor) {\n    var self = this;\n    if (!monitor) {\n      return 0;\n    }\n    var ids = {};\n    _.forEach(monitor.collector_ids, function(id) {\n      ids[id] = true;\n    });\n    _.forEach(monitor.collector_tags, function(t) {\n      _.forEach(self.collectorsByTag[t], function(c) {\n        ids[c.id] = true;\n      });\n    });\n    return Object.keys(ids).length;\n  }\n\n  totalChecks(monitor) {\n    return (30.5 * 24 * (3600/monitor.frequency) * this.collectorCount(monitor) / 1000000) + 0.5;\n  }\n\n  getMonitorTypes() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/monitor_types').then(function(types) {\n      var typesMap = {};\n      _.forEach(types, function(type) {\n        typesMap[type.id] = type;\n        self.monitor_types_by_name[type.name.toLowerCase()] = type;\n        self.setDefaultMonitor(type);\n      });\n      self.monitor_types = typesMap;\n    });\n  }\n\n  setDefaultMonitor(type) {\n    var self = this;\n    if (!(type.name.toLowerCase() in this.monitors)) {\n      var settings = [];\n      _.forEach(type.settings, function(setting) {\n        var val = setting.default_value;\n        if (self.endpoint && (setting.variable === \"host\" || setting.variable === \"name\" || setting.variable === \"hostname\")) {\n          val = self.endpoint.name || \"\";\n        }\n        settings.push({variable: setting.variable, value: val});\n      });\n      self.monitors[type.name.toLowerCase()] = {\n        id: null,\n        endpoint_id: null,\n        monitor_type_id: type.id,\n        collector_ids: [],\n        collector_tags: [],\n        settings: settings,\n        enabled: false,\n        frequency: 10,\n        health_settings: {\n          steps: 3,\n          num_collectors: 3,\n          notifications: {\n            enabled: false,\n            addresses: \"\"\n          }\n        }\n      };\n      self.monitorLastState[type.name.toLowerCase()] = _.cloneDeep(self.monitors[type.name.toLowerCase()]);\n    }\n  }\n\n  defaultSettingByVariable(monitorType, variable) {\n    var s = null;\n    var type = this.monitor_types_by_name[monitorType];\n    _.forEach(type.settings, function(setting) {\n      if (setting.variable === variable) {\n        s = setting;\n      }\n    });\n    return s;\n  }\n\n  currentSettingByVariable(monitor, variable) {\n    var s = {\n      \"variable\": variable,\n      \"value\": null\n    };\n    var found = false;\n    _.forEach(monitor.settings, function(setting) {\n      if (found) {\n        return;\n      }\n      if (setting.variable === variable) {\n        s = setting;\n        found = true;\n      }\n    });\n    if (! found) {\n      monitor.settings.push(s);\n    }\n    var type = this.monitor_types[monitor.monitor_type_id];\n    if (s.value === null) {\n      _.forEach(type.settings, function(setting) {\n        if (setting.variable === variable) {\n          s.value = setting.default_value;\n        }\n      });\n    }\n    if (!found) {\n      this.monitorLastState[type.name.toLowerCase()].settings.push(_.cloneDeep(s));\n    }\n\n    return s;\n  }\n\n  reset() {\n    var self = this;\n    this.discovered = false;\n    this.discoveryInProgress = false;\n    this.discoveryError = false;\n    this.showConfig = false;\n    this.showCreating = false;\n    // $scope.endpoint.name = {\"name\": \"\"};\n    this.monitors = {};\n    _.forEach(self.monitor_types, function(type) {\n      self.setDefaultMonitor(type);\n    });\n  }\n\n  cancel() {\n    this.reset();\n    this.ignoreChanges = true;\n    this.$window.history.back();\n  }\n\n  getEndpoint(idString) {\n    var self = this;\n    var id = parseInt(idString);\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/endpoints/'+id).then(function(endpoint) {\n      self.endpoint = endpoint;\n      self.newEndpointName = endpoint.name;\n      //get monitors for this endpoint.\n      self.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/monitors?endpoint_id='+id).then(function(monitors) {\n        _.forEach(monitors, function(monitor) {\n          var type = monitor.monitor_type_name.toLowerCase();\n          if (type in self.monitors) {\n            _.assign(self.monitors[type], monitor);\n          } else {\n            self.monitors[type] = monitor;\n          }\n          self.monitorLastState[type] = _.cloneDeep(monitor);\n        });\n        self.pageReady = true;\n      });\n    });\n  }\n\n  setEndpoint(id) {\n    this.$location.url('plugins/raintank-worldping-app/page/endpoint-config?endpoint='+id);\n  }\n\n  remove(endpoint) {\n    var self = this;\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/endpoints/' + endpoint.id).then(function() {\n      self.$location.path('plugins/raintank-worldping-app/page/endpoints');\n    });\n  }\n\n  removeMonitor(mon) {\n    var self = this;\n    var type = this.monitor_types[mon.monitor_type_id];\n    this.backendSrv.delete('api/plugin-proxy/raintank-worldping-app/api/monitors/' + mon.id).then(function() {\n      self.setDefaultMonitor(type.name.toLowerCase());\n      delete self.monitorLastState[type.name.toLowerCase()];\n    });\n  }\n\n  updateEndpoint() {\n    this.endpoint.name = this.newEndpointName;\n    this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/endpoints', this.endpoint);\n  }\n\n  tagsUpdated() {\n    this.backendSrv.post(\"api/plugin-proxy/raintank-worldping-app/api/endpoints\", this.endpoint);\n  }\n\n  save(location) {\n    var self = this;\n    var promises = [];\n    _.forEach(this.monitors, function(monitor) {\n      monitor.endpoint_id = self.endpoint.id;\n      var type = self.monitor_types[monitor.monitor_type_id];\n      if (monitor.id) {\n        if (!angular.equals(monitor, self.monitorLastState[type.name.toLowerCase()])) {\n          promises.push(self.updateMonitor(monitor));\n        }\n      } else if (monitor.enabled) {\n        promises.push(self.addMonitor(monitor));\n      }\n    });\n\n    promises.push(self.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/endpoints', self.endpoint));\n    Promise.all(promises).then(function() {\n      if (location) {\n        self.$location.path(location);\n      } else {\n        self.$location.path(\"plugins/raintank-worldping-app/page/endpoints\");\n      }\n    });\n  }\n\n  addMonitor(monitor) {\n    var self = this;\n    monitor.endpoint_id = this.endpoint.id;\n    return this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/monitors', monitor, true).then(function(resp) {\n      _.defaults(monitor, resp);\n      var type = self.monitor_types[resp.monitor_type_id];\n      self.monitorLastState[type.name.toLowerCase()] = _.cloneDeep(monitor);\n      var action = \"disabled\";\n      if (monitor.enabled) {\n        action = \"enabled\";\n      }\n      var message = type.name.toLowerCase() + \" \" + action + \" successfully\";\n      self.alertSrv.set(message, '', 'success', 3000);\n    });\n  }\n\n  updateMonitor(monitor) {\n    var self = this;\n    if (!monitor.id) {\n      return this.addMonitor(monitor);\n    }\n\n    return this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/monitors', monitor, true).then(function() {\n      var type = self.monitor_types[monitor.monitor_type_id];\n      var message = type.name.toLowerCase() + \" updated\";\n      if (self.monitorLastState[type.name.toLowerCase()].enabled !== monitor.enabled) {\n        var action = \"disabled\";\n        if (monitor.enabled) {\n          action = \"enabled\";\n        }\n        message = type.name.toLowerCase() + \" \" + action + \" successfully\";\n      }\n\n      self.monitorLastState[type.name.toLowerCase()] = _.cloneDeep(monitor);\n      self.alertSrv.set(message, '', 'success', 3000);\n    });\n  }\n\n  parseSuggestions(payload) {\n    var self = this;\n    var defaults = {\n      endpoint_id: 0,\n      monitor_type_id: 1,\n      collector_ids: this.global_collectors.collector_ids,\n      collector_tags: this.global_collectors.collector_tags,\n      settings: [],\n      enabled: true,\n      frequency: 60,\n      health_settings: {\n        steps: 3,\n        num_collectors: 3,\n        notifications: {\n          enabled: false,\n          addresses: \"\"\n        }\n      }\n    };\n    _.forEach(payload, function(suggestion) {\n      _.defaults(suggestion, defaults);\n      var type = self.monitor_types[suggestion.monitor_type_id];\n      if (type.name.indexOf(\"Ping\") === 0) {\n        suggestion.frequency = 10;\n      }\n      self.monitors[type.name.toLowerCase()] = suggestion;\n    });\n  }\n\n  skipDiscovery() {\n    this.discoveryInProgress = false;\n    this.showConfig = true;\n    this.discoveryError = false;\n  }\n\n  discover(endpoint) {\n    if (!endpoint.name){\n      return;\n    }\n    var self = this;\n    this.discoveryInProgress = true;\n    this.discoveryError = false;\n    this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/endpoints/discover', endpoint).then(function(resp) {\n      if (!self.showConfig) {\n        if (endpoint.name.indexOf(\"://\") > -1) {\n          //endpoint name is in the form scheme://domain\n          var parser = document.createElement('a');\n          parser.href = endpoint.name;\n          endpoint.name = parser.hostname;\n        }\n        self.showConfig = true;\n        self.discovered = true;\n        self.parseSuggestions(resp);\n      }\n    }, function() {\n      self.discoveryError = \"Failed to discover endpoint.\";\n    }).finally(function() {\n      self.discoveryInProgress = false;\n    });\n  }\n\n  addEndpoint() {\n    var self = this;\n    if (this.endpoint.id) {\n      return this.updateEndpoint();\n    }\n\n    var delay = 120;\n\n    var payload = this.endpoint;\n    payload.monitors = [];\n    _.forEach(this.monitors, function(monitor) {\n      monitor.endpoint_id = -1;\n      payload.monitors.push(monitor);\n      if (monitor.enabled && monitor.frequency < delay) {\n        delay = monitor.frequency;\n      }\n    });\n    this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/endpoints', payload)\n    .then(function(resp) {\n      self.endpoint = resp;\n      self.ignoreChanges = true;\n      self.alertSrv.set(\"endpoint added\", '', 'success', 3000);\n      self.showCreating = true;\n      self.endpointReadyDelay = delay;\n      self.endpointReady = false;\n      return self.$timeout(delay * 1000);\n    })\n    .then(function() {\n      console.log(self.endpointReadyDelay);\n      self.endpointReady = true;\n    });\n  }\n\n  changesPending() {\n    var self = this;\n    var changes = false;\n    _.forEach(this.monitors, function(monitor) {\n      if (monitor.id === null) {\n        return;\n      }\n      var type = self.monitor_types[monitor.monitor_type_id];\n      if (!angular.equals(monitor, self.monitorLastState[type.name.toLowerCase()])) {\n        changes = true;\n      }\n    });\n\n    return changes;\n  }\n\n  gotoDashboard(endpoint, type) {\n    var self = this;\n    if (!type) {\n      type = 'summary';\n    }\n    var search = {\n      \"var-collector\": \"All\",\n      \"var-endpoint\": this.endpoint.slug\n    };\n    switch(type) {\n      case \"summary\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n      case \"ping\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-ping\").search(search);\n        break;\n      case \"dns\":\n        self.$location.path(\"/dashboard/db/worldping-endpoint-dns\").search(search);\n        break;\n      case \"http\":\n        search['var-protocol'] = \"http\";\n        self.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      case \"https\":\n        search['var-protocol'] = \"https\";\n        self.$location.path(\"/dashboard/db/worldping-endpoint-web\").search(search);\n        break;\n      default:\n        self.$location.path(\"/dashboard/db/worldping-endpoint-summary\").search(search);\n        break;\n    }\n  }\n}\n\nEndpointConfigCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/endpoint/partials/endpoint_config.html';\n\nexport {EndpointConfigCtrl};\n"]}