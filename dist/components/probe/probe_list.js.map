{"version":3,"sources":["../../../src/components/probe/probe_list.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO;;;;;;;;;;;;;;;;;;;;;+BAED;;;;AAGJ,iBAHI,aAGJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,UAAnD,EAA+D,UAA/D,EAA2E;gCAHvE,eAGuE;;AACzE,eAAK,UAAL,GAAkB,WAAW,OAAX,CAAmB,OAAnB,CAAlB,CADyE;AAEzE,eAAK,UAAL,GAAkB,UAAlB,CAFyE;AAGzE,eAAK,OAAL,GAAe,OAAf,CAHyE;AAIzE,eAAK,SAAL,GAAiB,SAAjB,CAJyE;AAKzE,eAAK,SAAL,GAAiB,KAAjB,CALyE;AAMzE,eAAK,QAAL,GAAgB,CACd,EAAC,OAAO,QAAP,EAAiB,OAAO,EAAC,QAAQ,IAAR,EAAc,SAAS,IAAT,EAAtB,EAAsC,IAAI,CAAJ,EAD1C,EAEd,EAAC,OAAO,SAAP,EAAkB,OAAO,EAAC,QAAQ,KAAR,EAAe,SAAS,IAAT,EAAvB,EAAuC,IAAI,CAAJ,EAF5C,EAGd,EAAC,OAAO,UAAP,EAAmB,OAAO,EAAC,SAAS,KAAT,EAAR,EAAyB,IAAI,CAAJ,EAH/B,CAAhB,CANyE;;AAYzE,eAAK,MAAL,GAAc,EAAC,KAAK,EAAL,EAAS,QAAQ,EAAR,EAAxB,CAZyE;AAazE,eAAK,UAAL,GAAkB,MAAlB,CAbyE;AAczE,eAAK,MAAL,GAAc,EAAd,CAdyE;AAezE,eAAK,SAAL,GAfyE;SAA3E;;qBAHI;;sCAqBQ;AACV,gBAAI,MAAM,EAAN,CADM;AAEV,cAAE,OAAF,CAAU,KAAK,MAAL,EAAa,UAAS,KAAT,EAAgB;AACrC,gBAAE,OAAF,CAAU,MAAM,IAAN,EAAY,UAAS,GAAT,EAAc;AAClC,oBAAI,GAAJ,IAAW,IAAX,CADkC;eAAd,CAAtB,CADqC;aAAhB,CAAvB,CAFU;AAOV,mBAAO,OAAO,IAAP,CAAY,GAAZ,CAAP,CAPU;;;;yCAUG,KAAK;AAClB,iBAAK,MAAL,CAAY,GAAZ,GAAkB,GAAlB,CADkB;;;;yCAIL;AACb,gBAAI,OAAO,IAAP,CADS;AAEb,mBAAO,UAAS,MAAT,EAAiB;AACtB,kBAAI,CAAC,KAAK,MAAL,CAAY,MAAZ,EAAoB;AACvB,uBAAO,IAAP,CADuB;eAAzB;AAGA,kBAAI,MAAM,KAAK,OAAL,CAAa,QAAb,EAAuB,CAAC,MAAD,CAAvB,EAAiC,KAAK,MAAL,CAAY,MAAZ,CAAvC,CAJkB;AAKtB,qBAAO,IAAI,MAAJ,GAAa,CAAb,CALe;aAAjB,CAFM;;;;sCAWH;AACV,gBAAI,OAAO,IAAP,CADM;AAEV,mBAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,uDAApB,EAA6E,IAA7E,CAAkF,UAAS,IAAT,EAAe;AACtG,kBAAI,KAAK,IAAL,CAAU,IAAV,KAAmB,GAAnB,EAAwB;AAC1B,qBAAK,QAAL,CAAc,GAAd,CAAkB,uBAAlB,EAA2C,KAAK,IAAL,CAAU,OAAV,EAAmB,OAA9D,EAAuE,KAAvE,EAD0B;AAE1B,uBAAO,KAAK,EAAL,CAAQ,MAAR,CAAe,KAAK,IAAL,CAAU,OAAV,CAAtB,CAF0B;eAA5B;AAIA,mBAAK,SAAL,GAAiB,IAAjB,CALsG;AAMtG,mBAAK,MAAL,GAAc,KAAK,IAAL,CANwF;aAAf,CAAzF,CAFU;;;;wCAYE,WAAW;AACvB,iBAAK,SAAL,CAAe,IAAf,CAAoB,2CAApB,EAAiE,MAAjE,CAAwE,EAAC,iBAAiB,UAAU,IAAV,EAAgB,gBAAgB,KAAhB,EAA1G,EADuB;;;;eA1DrB;;;AA+DN,oBAAc,WAAd,GAA4B,iFAA5B;;+BACQ","file":"probe_list.js","sourcesContent":["import _ from 'lodash';\n\nclass ProbeListCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, $filter, backendSrv, contextSrv) {\n    this.isOrgAdmin = contextSrv.hasRole('Admin');\n    this.backendSrv = backendSrv;\n    this.$filter = $filter;\n    this.$location = $location;\n    this.pageReady = false;\n    this.statuses = [\n      {label: \"Online\", value: {online: true, enabled: true}, id: 2},\n      {label: \"Offline\", value: {online: false, enabled: true}, id: 3},\n      {label: \"Disabled\", value: {enabled: false}, id: 4},\n    ];\n\n    this.filter = {tag: \"\", status: \"\"};\n    this.sort_field = \"name\";\n    this.probes = [];\n    this.getProbes();\n  }\n\n  probeTags() {\n    var map = {};\n    _.forEach(this.probes, function(probe) {\n      _.forEach(probe.tags, function(tag) {\n        map[tag] = true;\n      });\n    });\n    return Object.keys(map);\n  }\n\n  setProbeFilter(tag) {\n    this.filter.tag = tag;\n  }\n\n  statusFilter() {\n    var self = this;\n    return function(actual) {\n      if (!self.filter.status) {\n        return true;\n      }\n      var res = self.$filter('filter')([actual], self.filter.status);\n      return res.length > 0;\n    };\n  }\n\n  getProbes() {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/v2/probes').then(function(resp) {\n      if (resp.meta.code !== 200) {\n        self.alertSrv.set(\"failed to get probes.\", resp.meta.message, 'error', 10000);\n        return self.$q.reject(resp.meta.message);\n      }\n      self.pageReady = true;\n      self.probes = resp.body;\n    });\n  }\n\n  gotoDashboard(collector) {\n    this.$location.path(\"/dashboard/db/worldping-collector-summary\").search({\"var-collector\": collector.slug, \"var-endpoint\": \"All\"});\n  }\n}\n\nProbeListCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/probe/partials/probe_list.html';\nexport {ProbeListCtrl};\n"]}