{"version":3,"sources":["../../../src/components/probe/probe_create.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO;;;;;;;;;;;;;;;;;;;;;AAEH,iBAAW;AACb,cAAM,EAAN;AACA,iBAAS,IAAT;;;iCAGI;;;;AAGJ,iBAHI,eAGJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,QAA1C,EAAoD,UAApD,EAAgE;gCAH5D,iBAG4D;;AAC9D,cAAI,OAAO,IAAP,CAD0D;AAE9D,eAAK,UAAL,GAAkB,UAAlB,CAF8D;AAG9D,eAAK,SAAL,GAAiB,SAAjB,CAH8D;AAI9D,eAAK,QAAL,GAAgB,QAAhB,CAJ8D;AAK9D,eAAK,YAAL,GAAoB,KAApB,CAL8D;AAM9D,eAAK,MAAL,GAAc,EAAd,CAN8D;;AAQ9D,eAAK,SAAL,GAAiB,QAAQ,IAAR,CAAa,QAAb,CAAjB,CAR8D;;AAU9D,cAAI,WAAW,UAAU,MAAV,EAAX,EAA+B;AACjC,iBAAK,YAAL,CAAkB,UAAU,MAAV,GAAmB,KAAnB,CAAlB,CADiC;WAAnC,MAEO;AACL,iBAAK,KAAL,GADK;WAFP;SAVF;;qBAHI;;uCAoBS,IAAI;AACf,gBAAI,OAAO,IAAP,CADW;AAEf,mBAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,4DAA0D,EAA1D,CAApB,CAAkF,IAAlF,CAAuF,UAAS,SAAT,EAAoB;AAChH,mBAAK,SAAL,GAAiB,SAAjB,CADgH;aAApB,CAA9F,CAFe;;;;kCAOT;AACN,iBAAK,SAAL,GAAiB,QAAQ,IAAR,CAAa,QAAb,CAAjB,CADM;;;;iCAID;AACL,mBAAO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,wDAArB,EAA+E,KAAK,SAAL,CAAtF,CADK;;;;gCAID;AACJ,gBAAI,OAAO,IAAP,CADA;AAEJ,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,wDAApB,EAA8E,KAAK,SAAL,CAA9E,CACG,IADH,CACQ,UAAS,IAAT,EAAe;AACnB,mBAAK,SAAL,GAAiB,IAAjB,CADmB;AAEnB,mBAAK,YAAL,GAAoB,IAApB,CAFmB;aAAf,CADR,CAFI;;;;uCASO;AACX,iBAAK,cAAL,GAAsB,IAAtB,CADW;;;;0CAIG;AACd,iBAAK,gBAAL,GAAwB,KAAxB,CADc;;;;wCAIF;AACZ,iBAAK,gBAAL,GAAwB,IAAxB,CADY;;;;mCAIL;AACP,gBAAI,OAAO,IAAP,CADG;AAEP,gBAAI,QAAQ;AACV,oBAAM,QAAN;AACA,oBAAM,eAAe,KAAK,SAAL,CAAe,IAAf;aAFnB,CAFG;;AAOP,iBAAK,UAAL,CAAgB,IAAhB,CAAqB,uDAArB,EAA8E,KAA9E,EAAqF,IAArF,CAA0F,UAAS,MAAT,EAAiB;AACzG,mBAAK,MAAL,GAAc,OAAO,GAAP,CAD2F;AAEzG,mBAAK,UAAL,GAAkB,IAAlB,CAFyG;aAAjB,CAA1F,CAPO;;;;eAxDL;;;AAsEN,sBAAgB,WAAhB,GAA8B,mFAA9B;;iCAEE","file":"probe_create.js","sourcesContent":["import angular from 'angular';\n\nvar defaults = {\n  name: '',\n  enabled: true,\n};\n\nclass ProbeCreateCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, $timeout, backendSrv) {\n    var self = this;\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n    this.$timeout = $timeout;\n    this.newCollector = false;\n    this.apiKey = \"\";\n\n    this.collector = angular.copy(defaults);\n\n    if (\"probe\" in $location.search()) {\n      self.getCollector($location.search().probe);\n    } else {\n      self.reset();\n    }\n  }\n\n  getCollector(id) {\n    var self = this;\n    return this.backendSrv.get('api/plugin-proxy/raintank-worldping-app/api/collectors/'+id).then(function(collector) {\n      self.collector = collector;\n    });\n  }\n\n  reset() {\n    this.collector = angular.copy(defaults);\n  }\n\n  save() {\n    return this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/collectors', this.collector);\n  }\n\n  add() {\n    var self = this;\n    this.backendSrv.put('api/plugin-proxy/raintank-worldping-app/api/collectors', this.collector)\n      .then(function(resp) {\n        self.collector = resp;\n        self.newCollector = true;\n      });\n  }\n\n  configInfo() {\n    this.showConfigInfo = true;\n  }\n\n  defaultDistro() {\n    this.showDistroConfig = false;\n  }\n\n  otherDistro() {\n    this.showDistroConfig = true;\n  }\n\n  apiKey() {\n    var self = this;\n    var token = {\n      role: 'Editor',\n      name: \"collector:\" + this.collector.name\n    };\n\n    this.backendSrv.post('api/plugin-proxy/raintank-worldping-app/api/auth/keys', token).then(function(result) {\n      self.apiKey = result.key;\n      self.showApiKey = true;\n    });\n  }\n}\n\nProbeCreateCtrl.templateUrl = 'public/plugins/raintank-worldping-app/components/probe/partials/probe_create.html';\nexport {\n  ProbeCreateCtrl\n};\n\n"]}